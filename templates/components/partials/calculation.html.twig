{% set data = this.calculate(type) %}

<div class="flex items-center gap-4">
    <h3 class="truncate">{{ type.value|title }} premium</h3>
</div>
<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-300">
        <tbody>
            <tr class="text-gray-600">
                <td class="py-5">Base value</td>
                <td class="py-5 text-right text-sm">
                    {{ data.base_value|format_currency('CHF', {
                        fraction_digit: 0,
                        grouping_used: true
                    }) }}
                </td>
            </tr>
            <tr class="text-sm">
                <td class="py-2">Insurance premium</td>
                <td class="py-2 text-right">
                    {{ data.insurance_premium|format_currency('CHF', {
                        rounding_mode: 'halfup',
                        rounding_increment: 0.05,
                        fraction_digit: 2,
                        grouping_used: true
                    }) }}
                </td>
            </tr>
            <tr class="text-sm">
                <td class="py-2">Stamp tax</td>
                <td class="py-2 text-right">
                    {{ data.stamp_tax|format_currency('CHF', {
                        rounding_mode: 'halfup',
                        rounding_increment: 0.05,
                        fraction_digit: 2,
                        grouping_used: true
                    }) }}
                </td>
            </tr>
            <tr class="text-sm border-t border-t-gray-300">
                <td class="py-2">Subtotal</td>
                <td class="py-2 text-right">
                    {{ data.subtotal|format_currency('CHF', {
                        rounding_mode: 'halfup',
                        rounding_increment: 0.05,
                        fraction_digit: 2,
                        grouping_used: true
                    }) }}
                </td>
            </tr>
            <tr class="text-sm">
                <td class="pt-2 pb-4">Prevention fee</td>
                <td class="pt-2 pb-4 text-right">
                    {{ data.prevention_fee|format_currency('CHF', {
                        rounding_mode: 'halfup',
                        rounding_increment: 0.05,
                        fraction_digit: 2,
                        grouping_used: true
                    }) }}
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr class="font-semibold">
                <td class="pt-4">Annual premium</td>
                <td class="pt-4 text-right">
                    {{ data.annual_premium|format_currency('CHF', {
                        rounding_mode: 'halfup',
                        rounding_increment: 0.05,
                        fraction_digit: 2,
                        grouping_used: true
                    }) }}
                </td>
            </tr>
        </tfoot>
    </table>
</div>
